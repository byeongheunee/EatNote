<template>
  <div
    class="min-h-screen bg-gradient-to-br from-orange-50 via-yellow-50 to-amber-50 flex items-center justify-center p-4">
    <!-- ë©”ì¸ ì»¨í…Œì´ë„ˆ -->
    <div class="w-full max-w-lg">
      <!-- ë¡œê³  ë° ì œëª© -->
      <div class="text-center mb-8">
        <div class="inline-flex items-center gap-3 mb-4">
          <div
            class="w-12 h-12 bg-gradient-to-br from-yellow-400 to-orange-400 rounded-xl flex items-center justify-center shadow-lg">
            <span class="text-white text-2xl">ğŸ½ï¸</span>
          </div>
          <h1 @click="goHome"
            class="text-3xl font-bold bg-gradient-to-r from-orange-600 to-amber-600 bg-clip-text text-transparent cursor-pointer hover:from-orange-700 hover:to-amber-700 transition-all duration-300">
            EatNote
          </h1>
        </div>
        <p class="text-gray-600 text-lg">ìƒˆë¡œìš´ ì‹œì‘ì„ ìœ„í•œ ì²« ê±¸ìŒ</p>
      </div>

      <!-- í”„ë¡œê·¸ë ˆìŠ¤ ë°” -->
      <div class="mb-8">
        <div class="flex items-center justify-between mb-2">
          <span class="text-sm font-medium text-gray-600">ì§„í–‰ ìƒí™©</span>
          <span class="text-sm font-medium text-gray-600">{{ step }}/3</span>
        </div>
        <div class="w-full bg-gray-200 rounded-full h-2">
          <div
            class="bg-gradient-to-r from-yellow-400 to-orange-400 h-2 rounded-full transition-all duration-500 ease-out"
            :style="`width: ${(step / 3) * 100}%`"></div>
        </div>
      </div>

      <!-- ë©”ì¸ ì¹´ë“œ -->
      <div class="bg-white/80 backdrop-blur-sm rounded-3xl shadow-xl border border-white/50 overflow-hidden">

        <!-- Step 1: íšŒì› ìœ í˜• ì„ íƒ -->
        <div v-if="step === 1" class="p-0 overflow-hidden">
          <div class="text-center mb-8 p-8 pb-4">
            <h2 class="text-2xl font-bold text-gray-800 mb-2">ì–´ë–¤ íšŒì›ìœ¼ë¡œ ê°€ì…í•˜ì‹œë‚˜ìš”?</h2>
            <p class="text-gray-600">ëª©ì ì— ë§ëŠ” ì„œë¹„ìŠ¤ë¥¼ ì œê³µí•´ë“œë¦´ê²Œìš”</p>
          </div>

          <!-- ì¢Œìš° ë¶„í•  ì„ íƒ ì˜ì—­ -->
          <div class="flex h-[22rem]">
            <!-- íŠ¸ë ˆì´ë„ˆ ì„ íƒ -->
            <div @click="selectUserType(1)" class="user-type-split trainer-side group"
              :class="{ 'selected': selectedUserType === 1 }">
              <!-- ë°°ê²½ ì´ë¯¸ì§€ -->
              <div class="split-background trainer-bg"></div>

              <!-- ì˜¤ë²„ë ˆì´ -->
              <div class="split-overlay"></div>

              <!-- ì»¨í…ì¸  -->
              <div class="split-content">
                <div class="split-icon">ğŸ’ª</div>
                <h3 class="split-title">íŠ¸ë ˆì´ë„ˆ</h3>
                <div class="split-description">
                  <div class="description-item">- íš¨ìœ¨ì ì¸ íšŒì›ì˜ ì‹ë‹¨ ê´€ë¦¬</div>
                  <div class="description-item">- ì „ë¬¸ í”¼ë“œë°± ì œê³µ</div>
                  <div class="description-item">- íŠ¸ë ˆì´ë„ˆê°„ ì»¤ë®¤ë‹ˆí‹° ì´ìš©</div>
                </div>
                <div class="split-tags">
                  <span class="tag trainer-tag">ì „ë¬¸ê°€</span>
                  <span class="tag trainer-tag">í”¼ë“œë°± ì œê³µ</span>
                </div>
              </div>

              <!-- ì„ íƒ í‘œì‹œ -->
              <div class="selection-indicator trainer-indicator">
                <div class="check-circle"></div>
              </div>
            </div>

            <!-- êµ¬ë¶„ì„  -->
            <div class="divider"></div>

            <!-- ì¼ë°˜ íšŒì› ì„ íƒ -->
            <div @click="selectUserType(2)" class="user-type-split member-side group"
              :class="{ 'selected': selectedUserType === 2 }">
              <!-- ë°°ê²½ ì´ë¯¸ì§€ -->
              <div class="split-background member-bg"></div>

              <!-- ì˜¤ë²„ë ˆì´ -->
              <div class="split-overlay"></div>

              <!-- ì»¨í…ì¸  -->
              <div class="split-content">
                <div class="split-icon">ğŸ™‹â€â™‚ï¸</div>
                <h3 class="split-title">íšŒì›</h3>
                <div class="split-description">
                  <div class="description-item">- ì†ì‰¬ìš´ ì‹ë‹¨ ê´€ë¦¬</div>
                  <div class="description-item">- AI ë¶„ì„ì„ í†µí•´ ê±´ê°• ê´€ë¦¬</div>
                  <div class="description-item">- ì»¤ë®¤ë‹ˆí‹° ì´ìš©</div>
                </div>
                <div class="split-tags">
                  <span class="tag member-tag">ì‹ë‹¨ ê´€ë¦¬</span>
                  <span class="tag member-tag">AI ë¶„ì„</span>
                </div>
              </div>

              <!-- ì„ íƒ í‘œì‹œ -->
              <div class="selection-indicator member-indicator">
                <div class="check-circle"></div>
              </div>
            </div>
          </div>

          <!-- í™ˆìœ¼ë¡œ ëŒì•„ê°€ê¸° -->
          <div class="text-center p-6">
            <button @click="goHome"
              class="text-sm text-gray-500 hover:text-gray-700 transition-colors duration-300 flex items-center gap-2 mx-auto">
              ğŸ  í™ˆìœ¼ë¡œ ëŒì•„ê°€ê¸°
            </button>
          </div>
        </div>

        <!-- Step 2: ê¸°ë³¸ ì •ë³´ ì…ë ¥ -->
        <div v-else-if="step === 2" class="relative">

          <div class="p-8">
            <div class="text-center mb-8">
              <h2 class="text-2xl font-bold text-gray-800 mb-3">ê¸°ë³¸ ì •ë³´ë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”</h2>
              <p class="text-gray-600">ì•ˆì „í•˜ê³  ê°œì¸í™”ëœ ì„œë¹„ìŠ¤ë¥¼ ìœ„í•´ í•„ìš”í•´ìš”</p>
            </div>

            <div class="space-y-5">
              <!-- ì´ë©”ì¼ -->
              <div class="form-group">
                <label class="form-label">
                  <span class="label-icon">ğŸ“§</span>
                  ì´ë©”ì¼
                </label>
                <input v-model="form.email" type="email" class="form-input" :class="{ 'error': errors.email }"
                  placeholder="your@email.com" />
                <p v-if="errors.email" class="error-message">ì´ë©”ì¼ì€ í•„ìˆ˜ ì…ë ¥ í•­ëª©ì…ë‹ˆë‹¤.</p>
              </div>

              <!-- ë¹„ë°€ë²ˆí˜¸ -->
              <div class="form-group">
                <label class="form-label">
                  <span class="label-icon">ğŸ”’</span>
                  ë¹„ë°€ë²ˆí˜¸
                </label>
                <input v-model="form.password" type="password" class="form-input" :class="{ 'error': errors.password }"
                  placeholder="ì•ˆì „í•œ ë¹„ë°€ë²ˆí˜¸ë¥¼ ì…ë ¥í•˜ì„¸ìš”" />
                <p v-if="errors.password" class="error-message">ë¹„ë°€ë²ˆí˜¸ëŠ” í•„ìˆ˜ ì…ë ¥ í•­ëª©ì…ë‹ˆë‹¤.</p>
              </div>

              <!-- ë¹„ë°€ë²ˆí˜¸ í™•ì¸ -->
              <div class="form-group">
                <label class="form-label">
                  <span class="label-icon">ğŸ”</span>
                  ë¹„ë°€ë²ˆí˜¸ í™•ì¸
                </label>
                <input v-model="form.passwordConfirm" type="password" class="form-input"
                  :class="{ 'error': errors.passwordConfirm || passwordMismatch }" placeholder="ë¹„ë°€ë²ˆí˜¸ë¥¼ ë‹¤ì‹œ ì…ë ¥í•˜ì„¸ìš”" />
                <p v-if="errors.passwordConfirm" class="error-message">ë¹„ë°€ë²ˆí˜¸ í™•ì¸ì€ í•„ìˆ˜ì…ë‹ˆë‹¤.</p>
                <p v-if="passwordMismatch" class="error-message">ë¹„ë°€ë²ˆí˜¸ê°€ ì¼ì¹˜í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.</p>
              </div>

              <!-- ì´ë¦„ -->
              <div class="form-group">
                <label class="form-label">
                  <span class="label-icon">ğŸ‘¤</span>
                  ì´ë¦„
                </label>
                <input v-model="form.name" type="text" class="form-input" :class="{ 'error': errors.name }"
                  placeholder="ì‹¤ëª…ì„ ì…ë ¥í•´ì£¼ì„¸ìš”" />
                <p v-if="errors.name" class="error-message">ì´ë¦„ì€ í•„ìˆ˜ ì…ë ¥ í•­ëª©ì…ë‹ˆë‹¤.</p>
              </div>

              <!-- ë‹‰ë„¤ì„ -->
              <div class="form-group">
                <label class="form-label">
                  <span class="label-icon">âœ¨</span>
                  ë‹‰ë„¤ì„
                </label>
                <div class="flex gap-2">
                  <input v-model="form.nickname" type="text" class="form-input flex-1"
                    :class="{ 'error': errors.nickname }" placeholder="ë‹‰ë„¤ì„" />
                  <button type="button" @click="checkNickname" class="nickname-check-btn">
                    í™•ì¸
                  </button>
                </div>
                <p v-if="errors.nickname" class="error-message">ë‹‰ë„¤ì„ì€ í•„ìˆ˜ ì…ë ¥ í•­ëª©ì…ë‹ˆë‹¤.</p>
                <p v-if="nicknameMessage" :class="nicknameAvailable ? 'success-message' : 'error-message'">
                  {{ nicknameMessage }}
                </p>
              </div>

              <!-- ì„±ë³„ & ë‚˜ì´ -->
              <div class="grid grid-cols-2 gap-4">
                <div class="form-group">
                  <label class="form-label">
                    <span class="label-icon">âš§ï¸</span>
                    ì„±ë³„
                  </label>
                  <select v-model="form.gender" class="form-input">
                    <option value="M">ë‚¨ì„±</option>
                    <option value="F">ì—¬ì„±</option>
                  </select>
                </div>

                <div class="form-group">
                  <label class="form-label">
                    <span class="label-icon">ğŸ‚</span>
                    ë‚˜ì´
                  </label>
                  <input v-model="form.age" type="number" class="form-input" :class="{ 'error': errors.age }"
                    placeholder="ë‚˜ì´" />
                  <p v-if="errors.age" class="error-message">ë‚˜ì´ëŠ” í•„ìˆ˜ ì…ë ¥ í•­ëª©ì…ë‹ˆë‹¤.</p>
                </div>
              </div>

              <!-- í”„ë¡œí•„ ì‚¬ì§„ -->
              <div class="form-group">
                <label class="form-label">
                  <span class="label-icon">ğŸ“¸</span>
                  í”„ë¡œí•„ ì‚¬ì§„ (ì„ íƒì‚¬í•­)
                </label>
                <div class="file-upload-area" @click="$refs.fileInput.click()">
                  <div v-if="!profileImageFile" class="file-upload-placeholder">
                    <div class="text-3xl mb-2">ğŸ“·</div>
                    <p class="text-gray-600 font-medium">í´ë¦­í•´ì„œ ì‚¬ì§„ì„ ì„ íƒí•˜ì„¸ìš”</p>
                    <p class="text-xs text-gray-500 mt-1">JPG, PNG íŒŒì¼ ì§€ì›</p>
                  </div>
                  <div v-else class="file-upload-selected">
                    <div class="text-3xl mb-2">âœ…</div>
                    <p class="text-green-700 font-medium">{{ profileImageFile.name }}</p>
                    <p class="text-xs text-gray-500 mt-1">ë‹¤ë¥¸ íŒŒì¼ì„ ì„ íƒí•˜ë ¤ë©´ í´ë¦­í•˜ì„¸ìš”</p>
                  </div>
                </div>
                <input ref="fileInput" type="file" @change="handleFileChange" class="hidden" accept="image/*" />
              </div>
            </div>
          </div>

          <!-- ë„¤ë¹„ê²Œì´ì…˜ ë²„íŠ¼ë“¤ -->
          <div class="flex justify-between items-center mt-8 px-8 pb-6">
            <button @click="step = 1" class="nav-btn secondary flex items-center gap-2">
              â† ë’¤ë¡œê°€ê¸°
            </button>

            <button @click="goToNextStep" class="nav-btn primary flex items-center gap-2">
              ë‹¤ìŒ ë‹¨ê³„ â†’
            </button>
          </div>
        </div>

        <!-- Step 3: ìƒì„¸ ì •ë³´ ì…ë ¥ -->
        <div v-else-if="step === 3" class="p-8">
          <div class="text-center mb-6">
            <h2 class="text-2xl font-bold text-gray-800 mb-2">ë§ˆì§€ë§‰ ë‹¨ê³„ì˜ˆìš”!</h2>
            <p class="text-gray-600">{{ userType === 1 ? 'íŠ¸ë ˆì´ë„ˆ' : 'íšŒì›' }} ì „ìš© ì •ë³´ë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”</p>
          </div>

          <component :is="detailComponent" v-model="formDetail" @goBack="step = 2"
            @validation-change="handleValidationChange" />

          <!-- ë„¤ë¹„ê²Œì´ì…˜ ë²„íŠ¼ -->
          <div class="flex justify-between mt-8">
            <button @click="step = 2" class="nav-btn secondary">
              â† ë’¤ë¡œê°€ê¸°
            </button>
            <button @click="submitForm" class="nav-btn success" :disabled="isSubmitting || !formDetailValid">
              <span v-if="isSubmitting">ê°€ì… ì¤‘...</span>
              <span v-else-if="!formDetailValid">í•„ìˆ˜ í•­ëª©ì„ ì…ë ¥í•˜ì„¸ìš”</span>
              <span v-else>ğŸ‰ íšŒì›ê°€ì… ì™„ë£Œ</span>
            </button>
          </div>
        </div>
      </div>

      <!-- í•˜ë‹¨ ë§í¬ -->
      <div class="text-center mt-6">
        <p class="text-gray-600">
          ì´ë¯¸ ê³„ì •ì´ ìˆìœ¼ì‹ ê°€ìš”?
          <router-link to="/login"
            class="text-orange-600 hover:text-orange-700 font-medium transition-colors duration-300">
            ë¡œê·¸ì¸í•˜ê¸°
          </router-link>
        </p>
      </div>
    </div>
  </div>
</template>

<script setup>
import axios from 'axios'
import { useRouter } from 'vue-router'
import { ref, computed } from 'vue'
import TrainerDetailForm from '@/components/register/TrainerDetailForm.vue'
import MemberDetailForm from '@/components/register/MemberDetailForm.vue'
import { useToast } from 'vue-toastification'

const toast = useToast()
const router = useRouter()

const step = ref(1)
const userType = ref(null)
const selectedUserType = ref(null)
const profileImageFile = ref(null)
const isSubmitting = ref(false)
const formDetail = ref({})

const form = ref({
  email: '',
  password: '',
  passwordConfirm: '',
  name: '',
  nickname: '',
  gender: 'M',
  userType: null,
  age: 0,
})

const passwordMismatch = computed(() =>
  form.value.password && form.value.passwordConfirm && form.value.password !== form.value.passwordConfirm
)

const formDetailValid = ref(false)

const handleValidationChange = (valid) => {
  formDetailValid.value = valid
}

const errors = ref({
  email: false,
  password: false,
  passwordConfirm: false,
  name: false,
  nickname: false,
  age: false,
})

const nicknameAvailable = ref(null)
const nicknameMessage = ref('')

const goHome = () => {
  router.push('/')
}

const handleFileChange = (event) => {
  profileImageFile.value = event.target.files[0]
}

const selectUserType = (type) => {
  selectedUserType.value = type
  setTimeout(() => {
    userType.value = type
    form.value.userType = type
    step.value = 2
  }, 300)
}

const goToNextStep = () => {
  // ë¹„ë°€ë²ˆí˜¸ ë¶ˆì¼ì¹˜ ì²´í¬
  if (passwordMismatch.value) {
    toast.warning('ë¹„ë°€ë²ˆí˜¸ê°€ ì¼ì¹˜í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.')
    return
  }

  // í•„ìˆ˜ í•­ëª© ì²´í¬
  errors.value.email = !form.value.email
  errors.value.password = !form.value.password
  errors.value.passwordConfirm = !form.value.passwordConfirm
  errors.value.name = !form.value.name
  errors.value.nickname = !form.value.nickname
  errors.value.age = !form.value.age || form.value.age <= 0

  if (Object.values(errors.value).some(e => e)) {
    toast.error('í•„ìˆ˜ í•­ëª©ì„ ëª¨ë‘ ì…ë ¥í•´ì£¼ì„¸ìš”.')
    return
  }

  // ë‹‰ë„¤ì„ ì¤‘ë³µ í™•ì¸ ì²´í¬
  if (!form.value.nickname) {
    toast.error('ë‹‰ë„¤ì„ì„ ì…ë ¥í•´ì£¼ì„¸ìš”.')
    return
  }

  if (nicknameAvailable.value !== true) {
    toast.warning('ë‹‰ë„¤ì„ ì¤‘ë³µ í™•ì¸ì„ í•´ì£¼ì„¸ìš”.')
    return
  }

  // ìœ ì € íƒ€ì… í™•ì¸
  if (!userType.value) {
    toast.error('íšŒì› ìœ í˜•ì„ ì„ íƒí•´ì£¼ì„¸ìš”.')
    return
  }

  // ë‹¤ìŒ ë‹¨ê³„ ë°ì´í„° ì´ˆê¸°í™”
  if (userType.value === 1) {
    formDetail.value = {
      phone: '', address: '', gymName: '', gymWebsite: '', certificationNumber: '',
      businessNumber: '', introduction: '', career: '', instagramUrl: ''
    }
  } else {
    formDetail.value = {
      height: 0, weight: 0, bodyWater: 0, protein: 0, mineral: 0, bodyFat: 0,
      skeletalMuscle: 0, bodyFatMass: 0, bmi: 0, bodyFatPercentage: 0,
      goal: '', trainerNickname: '', allergyIds: []
    }
  }

  console.log('Moving to step 3, userType:', userType.value) // ë””ë²„ê¹…ìš©
  step.value = 3
}

const detailComponent = computed(() =>
  userType.value === 1 ? TrainerDetailForm : MemberDetailForm
)

const submitForm = async () => {
  if (isSubmitting.value || !formDetailValid.value) {
    if (!formDetailValid.value) {
      toast.error('í•„ìˆ˜ í•­ëª©ì„ ëª¨ë‘ ì…ë ¥í•´ì£¼ì„¸ìš”.')
    }
    return
  }

  isSubmitting.value = true

  try {
    const userJson = {
      ...form.value,
      ...(userType.value === 1
        ? { trainerDetails: formDetail.value }
        : { memberDetails: formDetail.value }),
    }
    delete userJson.passwordConfirm

    const formData = new FormData()
    formData.append('user', JSON.stringify(userJson))
    if (profileImageFile.value) {
      formData.append('file', profileImageFile.value)
    }

    const response = await axios.post('/api/users/register', formData, {
      headers: {
        'Content-Type': 'multipart/form-data',
      },
    })

    toast.success('ğŸ‰ íšŒì›ê°€ì…ì´ ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤! ğŸ‰')
    console.log('ì„œë²„ ì‘ë‹µ:', response.data)
    router.push('/login')

  } catch (error) {
    console.error('íšŒì›ê°€ì… ì‹¤íŒ¨:', error)
    toast.error('íšŒì›ê°€ì… ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.')
  } finally {
    isSubmitting.value = false
  }
}

const checkNickname = async () => {
  if (!form.value.nickname) {
    nicknameMessage.value = 'ë‹‰ë„¤ì„ì„ ì…ë ¥í•´ì£¼ì„¸ìš”.'
    nicknameAvailable.value = false
    return
  }

  try {
    const response = await axios.get(`/api/users/check-nickname?nickname=${form.value.nickname}`)
    console.log(response)
    nicknameAvailable.value = true
    nicknameMessage.value = 'ì‚¬ìš© ê°€ëŠ¥í•œ ë‹‰ë„¤ì„ì…ë‹ˆë‹¤.'
  } catch (err) {
    nicknameAvailable.value = false
    nicknameMessage.value = 'ì´ë¯¸ ì‚¬ìš© ì¤‘ì¸ ë‹‰ë„¤ì„ì…ë‹ˆë‹¤.'
  }
}

import { onMounted } from 'vue'

onMounted(() => {
  if (step.value === 1) {
    selectedUserType.value = null
    userType.value = null
  }
})

</script>

<style scoped>
/* ì¢Œìš° ë¶„í•  ì„ íƒ ìŠ¤íƒ€ì¼ */
.user-type-split {
  flex: 1;
  position: relative;
  cursor: pointer;
  overflow: hidden;
  transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
  min-height: 320px;
  border-radius: 0;
}

.user-type-split:hover {
  flex-grow: 1.02;
}

.user-type-split.selected {
  flex-grow: 1.05;
}

/* ë°°ê²½ ì´ë¯¸ì§€ */
.split-background {
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  transition: all 0.4s ease;
  opacity: 0.15;
}

.trainer-bg {
  background: linear-gradient(135deg,
      rgba(59, 130, 246, 0.4) 0%,
      rgba(99, 102, 241, 0.6) 50%,
      rgba(139, 69, 197, 0.4) 100%);
}

.member-bg {
  background: linear-gradient(135deg,
      rgba(34, 197, 94, 0.4) 0%,
      rgba(16, 185, 129, 0.6) 50%,
      rgba(5, 150, 105, 0.4) 100%);
}

.user-type-split:hover .split-background {
  opacity: 0.25;
  transform: scale(1.02);
}

.user-type-split.selected .split-background {
  opacity: 0.35;
  transform: scale(1.05);
}

/* ì˜¤ë²„ë ˆì´ */
.split-overlay {
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background: linear-gradient(180deg,
      rgba(255, 255, 255, 0.95) 0%,
      rgba(255, 255, 255, 0.85) 40%,
      rgba(255, 255, 255, 0.75) 100%);
  backdrop-filter: blur(1px);
  transition: all 0.4s ease;
}

.user-type-split:hover .split-overlay {
  background: linear-gradient(180deg,
      rgba(255, 255, 255, 0.9) 0%,
      rgba(255, 255, 255, 0.75) 40%,
      rgba(255, 255, 255, 0.65) 100%);
  backdrop-filter: blur(0.5px);
}

.user-type-split.selected .split-overlay {
  background: linear-gradient(180deg,
      rgba(255, 255, 255, 0.85) 0%,
      rgba(255, 255, 255, 0.65) 40%,
      rgba(255, 255, 255, 0.5) 100%);
  backdrop-filter: blur(0px);
}

/* ì»¨í…ì¸  */
.split-content {
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  text-align: center;
  padding: 2.5rem 1.5rem;
  z-index: 10;
  transition: all 0.4s ease;
}

.split-icon {
  font-size: 3.5rem;
  margin-bottom: 1.2rem;
  transition: all 0.4s ease;
  filter: drop-shadow(0 2px 4px rgba(0, 0, 0, 0.1));
}

.trainer-side .split-icon {
  color: #3b82f6;
}

.member-side .split-icon {
  color: #22c55e;
}

.user-type-split:hover .split-icon {
  font-size: 4rem;
  transform: translateY(-4px);
  filter: drop-shadow(0 4px 8px rgba(0, 0, 0, 0.15));
}

.user-type-split.selected .split-icon {
  font-size: 4.5rem;
  transform: translateY(-6px);
  filter: drop-shadow(0 6px 12px rgba(0, 0, 0, 0.2));
}

.split-title {
  font-size: 1.8rem;
  font-weight: 700;
  margin-bottom: 0.8rem;
  transition: all 0.4s ease;
  color: #374151;
}

.trainer-side:hover .split-title,
.trainer-side.selected .split-title {
  color: #1e40af;
}

.member-side:hover .split-title,
.member-side.selected .split-title {
  color: #059669;
}

.user-type-split:hover .split-title {
  font-size: 2rem;
  transform: translateY(-2px);
}

.user-type-split.selected .split-title {
  font-size: 2.2rem;
  transform: translateY(-4px);
}

.split-description {
  margin-bottom: 1.2rem;
  transition: all 0.4s ease;
  max-width: 220px;
}

.description-item {
  font-size: 0.85rem;
  color: #6b7280;
  margin-bottom: 0.4rem;
  text-align: left;
  line-height: 1.4;
  transition: all 0.4s ease;
}

.user-type-split:hover .description-item {
  font-size: 0.9rem;
  color: #4b5563;
  transform: translateY(-1px);
}

.user-type-split.selected .description-item {
  font-size: 0.95rem;
  color: #374151;
  transform: translateY(-2px);
}

/* íƒœê·¸ */
.split-tags {
  display: flex;
  flex-wrap: wrap;
  gap: 0.6rem;
  justify-content: center;
}

.tag {
  padding: 0.4rem 0.8rem;
  border-radius: 20px;
  font-size: 0.8rem;
  font-weight: 600;
  transition: all 0.3s ease;
  border: 1px solid transparent;
}

.trainer-tag {
  background-color: rgba(59, 130, 246, 0.15);
  color: #1e40af;
  border-color: rgba(59, 130, 246, 0.3);
}

.member-tag {
  background-color: rgba(34, 197, 94, 0.15);
  color: #059669;
  border-color: rgba(34, 197, 94, 0.3);
}

.trainer-side:hover .trainer-tag,
.trainer-side.selected .trainer-tag {
  background-color: rgba(59, 130, 246, 0.25);
  border-color: rgba(59, 130, 246, 0.5);
  transform: scale(1.05);
  box-shadow: 0 2px 8px rgba(59, 130, 246, 0.2);
}

.member-side:hover .member-tag,
.member-side.selected .member-tag {
  background-color: rgba(34, 197, 94, 0.25);
  border-color: rgba(34, 197, 94, 0.5);
  transform: scale(1.05);
  box-shadow: 0 2px 8px rgba(34, 197, 94, 0.2);
}

/* êµ¬ë¶„ì„  */
.divider {
  width: 1px;
  background: linear-gradient(to bottom,
      transparent 20%,
      rgba(156, 163, 175, 0.4) 50%,
      transparent 80%);
  z-index: 5;
}

/* ì„ íƒ í‘œì‹œ */
.selection-indicator {
  position: absolute;
  top: 1.5rem;
  right: 1.5rem;
  z-index: 20;
  transition: all 0.3s ease;
}

.check-circle {
  width: 2.2rem;
  height: 2.2rem;
  border-radius: 50%;
  border: 2px solid rgba(156, 163, 175, 0.4);
  background-color: rgba(255, 255, 255, 0.8);
  backdrop-filter: blur(4px);
  transition: all 0.3s ease;
  display: flex;
  align-items: center;
  justify-content: center;
}

.trainer-side:hover .check-circle {
  border-color: rgba(59, 130, 246, 0.6);
  background-color: rgba(59, 130, 246, 0.1);
  transform: scale(1.1);
}

.member-side:hover .check-circle {
  border-color: rgba(34, 197, 94, 0.6);
  background-color: rgba(34, 197, 94, 0.1);
  transform: scale(1.1);
}

.trainer-side.selected .check-circle {
  background-color: #3b82f6;
  border-color: #3b82f6;
  transform: scale(1.15);
  box-shadow: 0 4px 12px rgba(59, 130, 246, 0.3);
}

.member-side.selected .check-circle {
  background-color: #22c55e;
  border-color: #22c55e;
  transform: scale(1.15);
  box-shadow: 0 4px 12px rgba(34, 197, 94, 0.3);
}

.user-type-split.selected .check-circle::after {
  content: "âœ“";
  color: white;
  font-size: 1rem;
  font-weight: bold;
}

/* ë°˜ì‘í˜• */
@media (max-width: 768px) {
  .user-type-split {
    min-height: 280px;
  }

  .split-content {
    padding: 1.5rem;
  }

  .split-icon {
    font-size: 2.8rem;
    margin-bottom: 1rem;
  }

  .user-type-split:hover .split-icon {
    font-size: 3.2rem;
  }

  .split-title {
    font-size: 1.5rem;
    margin-bottom: 0.6rem;
  }

  .user-type-split:hover .split-title {
    font-size: 1.7rem;
  }

  .split-description {
    margin-bottom: 1rem;
    max-width: 180px;
  }

  .description-item {
    font-size: 0.8rem;
    margin-bottom: 0.3rem;
  }

  .user-type-split:hover .description-item {
    font-size: 0.85rem;
  }

  .tag {
    padding: 0.3rem 0.6rem;
    font-size: 0.75rem;
  }
}

/* ì‚¼ê°í˜• ë„¤ë¹„ê²Œì´ì…˜ ë²„íŠ¼ ì œê±° - ì¼ë°˜ ë²„íŠ¼ìœ¼ë¡œ êµì²´ë¨ */

/* ì…ë ¥ ì¹´ë“œ ìŠ¤íƒ€ì¼ */
.input-card {
  background: rgba(255, 255, 255, 0.6);
  backdrop-filter: blur(10px);
  border: 1px solid rgba(255, 255, 255, 0.3);
  border-radius: 16px;
  padding: 1.5rem;
  margin-bottom: 0.5rem;
  transition: all 0.3s ease;
  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.05);
}

.input-card:hover {
  background: rgba(255, 255, 255, 0.8);
  border-color: rgba(245, 158, 11, 0.3);
  box-shadow: 0 4px 16px rgba(0, 0, 0, 0.1);
}

.input-label {
  display: flex;
  align-items: center;
  gap: 0.5rem;
  font-size: 0.9rem;
  font-weight: 600;
  color: #374151;
  margin-bottom: 0.75rem;
}

.label-icon {
  font-size: 1.1rem;
}

.form-label {
  display: flex;
  align-items: center;
  gap: 0.5rem;
  font-size: 0.9rem;
  font-weight: 600;
  color: #374151;
  margin-bottom: 0.75rem;
}

.form-input {
  width: 100%;
  padding: 0.875rem 1rem;
  background-color: rgba(255, 255, 255, 0.9);
  border: 2px solid #e5e7eb;
  border-radius: 12px;
  font-size: 0.95rem;
  transition: all 0.3s ease;
  outline: none;
}

.form-input:focus {
  border-color: #f59e0b;
  box-shadow: 0 0 0 3px rgba(245, 158, 11, 0.1);
  background-color: #ffffff;
}

.form-input.error {
  border-color: #ef4444;
  background-color: rgba(254, 242, 242, 0.9);
}

.form-input.error:focus {
  box-shadow: 0 0 0 3px rgba(239, 68, 68, 0.1);
}

/* ì—ëŸ¬ ë° ì„±ê³µ ë©”ì‹œì§€ */
.error-message {
  color: #dc2626;
  font-size: 0.85rem;
  margin-top: 0.5rem;
  font-weight: 500;
  display: flex;
  align-items: center;
  gap: 0.25rem;
}

.error-message::before {
  content: "âš ï¸";
  font-size: 0.75rem;
}

.success-message {
  color: #059669;
  font-size: 0.85rem;
  margin-top: 0.5rem;
  font-weight: 500;
  display: flex;
  align-items: center;
  gap: 0.25rem;
}

.success-message::before {
  content: "âœ…";
  font-size: 0.75rem;
}

/* ì¤‘ë³µí™•ì¸ ë²„íŠ¼ */
.nickname-check-btn {
  padding: 0.875rem 1rem;
  background-color: #f3f4f6;
  border: 2px solid #e5e7eb;
  color: #374151;
  border-radius: 12px;
  font-size: 0.85rem;
  font-weight: 600;
  transition: all 0.3s ease;
  white-space: nowrap;
  min-width: 70px;
}

.nickname-check-btn:hover {
  background-color: #e5e7eb;
  border-color: #d1d5db;
  transform: translateY(-1px);
}

/* íŒŒì¼ ì—…ë¡œë“œ ì˜ì—­ */
.file-upload-area {
  width: 100%;
  padding: 1.5rem;
  background-color: rgba(255, 255, 255, 0.8);
  border: 2px dashed #d1d5db;
  border-radius: 12px;
  cursor: pointer;
  text-align: center;
  transition: all 0.3s ease;
}

.file-upload-area:hover {
  border-color: #f59e0b;
  background-color: rgba(255, 255, 255, 0.95);
  transform: translateY(-2px);
}

.file-upload-placeholder,
.file-upload-selected {
  transition: all 0.3s ease;
}

/* ë°˜ì‘í˜• - ì‚¼ê°í˜• ë²„íŠ¼ ê´€ë ¨ ì½”ë“œ ì œê±°ë¨ */

/* ë„¤ë¹„ê²Œì´ì…˜ ë²„íŠ¼ */
.nav-btn {
  padding: 0.75rem 1.5rem;
  font-weight: 600;
  border-radius: 0.75rem;
  transition: all 0.3s ease;
  transform: scale(1);
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
}

.nav-btn:hover {
  transform: scale(1.05);
  box-shadow: 0 6px 20px rgba(0, 0, 0, 0.15);
}

.nav-btn.secondary {
  background-color: #f3f4f6;
  color: #374151;
}

.nav-btn.secondary:hover {
  background-color: #e5e7eb;
}

.nav-btn.primary {
  background: linear-gradient(to right, #f59e0b, #f6a832);
  color: white;
}

.nav-btn.primary:hover {
  background: linear-gradient(to right, #d97706, #dc7726);
}

.nav-btn.success {
  background: linear-gradient(to right, #10b981, #34d399);
  color: white;
}

.nav-btn.success:hover {
  background: linear-gradient(to right, #059669, #10b981);
}

.nav-btn.success:disabled {
  opacity: 0.5;
  cursor: not-allowed;
  transform: scale(1);
}

.nav-btn.success:disabled:hover {
  transform: scale(1);
}

/* ê·¸ë¼ë°ì´ì…˜ í…ìŠ¤íŠ¸ */
.bg-clip-text {
  background-clip: text;
  -webkit-background-clip: text;
}

/* ì• ë‹ˆë©”ì´ì…˜ */
@keyframes slideInUp {
  from {
    opacity: 0;
    transform: translateY(20px);
  }

  to {
    opacity: 1;
    transform: translateY(0);
  }
}

.form-group {
  animation: slideInUp 0.4s ease-out;
}

.form-group:nth-child(odd) {
  animation-delay: 0.1s;
}

.form-group:nth-child(even) {
  animation-delay: 0.2s;
}

/* ë°˜ì‘í˜• */
@media (max-width: 640px) {
  .user-type-card {
    padding: 1rem;
  }

  .user-type-card .w-16 {
    width: 3rem;
    height: 3rem;
  }

  .form-input {
    font-size: 1rem;
  }
}
</style>