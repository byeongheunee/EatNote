<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
    "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
    
<mapper namespace="com.ssafy.eatnote.model.dao.AllergyDao">

	<!-- 알레르기 전체 목록 조회 -->
    <select id="findAllAllergies" resultType="AllergyResponse">
        SELECT allergy_id AS allergyId, name, category
        FROM allergy
        ORDER BY category, allergy_id
    </select>

	<!-- 회원 알레르기 종류 조회 -->
	<select id="findByUserId" resultType="AllergyResponse">
	    SELECT a.allergy_id AS allergyId,
	           a.name,
	           a.category
	      FROM user_allergy ua
	      JOIN allergy a ON ua.allergy_id = a.allergy_id
	     WHERE ua.user_id = #{userId}
	</select>

</mapper>